<section 
  (visible)="sectionVisible.set(true)" 
  class="py-24 bg-white overflow-hidden">
  <div class="container mx-auto px-4 sm:px-8">
    <div 
      class="fade-in-up"
      [class.is-visible]="sectionVisible()">
      <app-section-title mainTitle="ALUMNI VOICE" subTitle="OBの声"></app-section-title>
    </div>

    <div class="mt-16 relative" (mouseenter)="stopAutoSlide()" (mouseleave)="startAutoSlide()">
      <div class="overflow-hidden">
        <div class="flex transition-transform duration-700 ease-in-out" [style.transform]="carouselTransform()">
          @for (voice of voices; track voice.title; let i = $index) {
            <div class="flex-shrink-0 px-2 sm:px-4" [style.width]="cardWidth()">
              <div class="relative group h-full max-w-[280px] sm:max-w-sm md:max-w-none mx-auto">
                <img 
                  ngSrc="{{voice.image}}" 
                  width="800" 
                  height="1000" 
                  [alt]="voice.title" 
                  [priority]="i === 0"
                  [loading]="i === 0 ? 'eager' : 'lazy'"
                  sizes="(max-width: 768px) 280px, (max-width: 1024px) 384px, 400px"
                  class="w-full object-cover shadow-xl aspect-[3/4] sm:aspect-[4/5] max-h-[380px] sm:max-h-[450px] md:max-h-none transition-opacity duration-300"
                  style="background-color: #e5e7eb;">
                <div class="absolute bottom-0 left-0 right-0 p-3 sm:p-4 md:p-6 lg:p-8 bg-gradient-to-t from-black/85 via-black/70 to-transparent text-white">
                  <h3 class="font-serif-jp text-sm sm:text-base md:text-lg lg:text-xl xl:text-2xl leading-tight line-clamp-2">{{voice.title}}</h3>
                  <p class="text-xs sm:text-sm mt-1.5 sm:mt-2">{{voice.family}}</p>
                </div>
              </div>
            </div>
          }
        </div>
      </div>
       <!-- Navigation Buttons -->
      <button (click)="prev()" class="absolute top-1/2 -translate-y-1/2 left-2 sm:left-4 md:-left-8 w-10 h-10 sm:w-12 sm:h-12 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 z-10">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-[#333]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" /></svg>
      </button>
      <button (click)="next()" class="absolute top-1/2 -translate-y-1/2 right-2 sm:right-4 md:-right-8 w-10 h-10 sm:w-12 sm:h-12 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-all duration-300 z-10">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 sm:h-6 sm:w-6 text-[#333]" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" /></svg>
      </button>
    </div>
  </div>
</section>