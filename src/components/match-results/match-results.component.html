<main
  (visible)="isVisible.set(true)"
  [class.is-visible]="isVisible()"
  class="bg-white pt-32 pb-24 px-4 sm:px-8 fade-in-up">
  <div class="container mx-auto">
    <app-section-title mainTitle="MATCH RESULTS" subTitle="試合結果"></app-section-title>

    <div class="max-w-6xl mx-auto mt-16">
      <app-back-button class="mb-6 inline-block"></app-back-button>

      <!-- タブナビゲーション -->
      <div class="flex items-center gap-2 mb-8 border-b-2 border-gray-200">
        <button
          (click)="switchTab('practice')"
          class="px-6 py-3 font-bold transition-all relative"
          [class.text-[#002D62]]="viewMode() === 'practice'"
          [class.text-gray-500]="viewMode() !== 'practice'">
          練習試合
          <div
            class="absolute bottom-0 left-0 right-0 h-1 bg-[#002D62] transition-transform duration-300"
            [class.scale-x-100]="viewMode() === 'practice'"
            [class.scale-x-0]="viewMode() !== 'practice'"></div>
        </button>
        <button
          (click)="switchTab('official')"
          class="px-6 py-3 font-bold transition-all relative"
          [class.text-[#002D62]]="viewMode() === 'official'"
          [class.text-gray-500]="viewMode() !== 'official'">
          公式戦
          <div
            class="absolute bottom-0 left-0 right-0 h-1 bg-[#002D62] transition-transform duration-300"
            [class.scale-x-100]="viewMode() === 'official'"
            [class.scale-x-0]="viewMode() !== 'official'"></div>
        </button>
      </div>

      <!-- 練習試合セクション -->
      <div *ngIf="viewMode() === 'practice'" class="fade-in-up is-visible">
        <!-- 統計情報 -->
        <div class="bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg p-6 mb-8 shadow-md">
          <h3 class="text-xl font-bold font-serif-jp text-gray-800 mb-4">練習試合成績</h3>
          <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
            <div class="text-center">
              <p class="text-3xl font-bold text-[#002D62]">{{ practiceStats.total }}</p>
              <p class="text-sm text-gray-600 mt-1">試合数</p>
            </div>
            <div class="text-center">
              <p class="text-3xl font-bold text-green-600">{{ practiceStats.wins }}</p>
              <p class="text-sm text-gray-600 mt-1">勝利</p>
            </div>
            <div class="text-center">
              <p class="text-3xl font-bold text-red-600">{{ practiceStats.losses }}</p>
              <p class="text-sm text-gray-600 mt-1">敗北</p>
            </div>
            <div class="text-center">
              <p class="text-3xl font-bold text-yellow-600">{{ practiceStats.draws }}</p>
              <p class="text-sm text-gray-600 mt-1">引分</p>
            </div>
          </div>
        </div>

        <!-- 試合結果一覧 -->
        <div class="space-y-3">
          <div
            *ngFor="let match of practiceMatches; let i = index"
            class="bg-white border-2 rounded-lg p-4 hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1"
            [ngClass]="getResultClass(match.result)">
            <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
              <div class="flex items-center gap-3">
                <span class="text-sm text-gray-600 font-medium min-w-[80px]">
                  {{ match.date || '日付未定' }}
                </span>
                <span class="font-bold text-lg">
                  {{ match.ourScore }} - {{ match.opponentScore }}
                </span>
                <span class="text-gray-700">vs {{ match.opponent }}</span>
              </div>
              <div class="flex items-center gap-2">
                <span
                  class="px-3 py-1 rounded-full text-sm font-bold"
                  [ngClass]="getResultClass(match.result)">
                  {{ getResultText(match.result) }}
                </span>
                <span
                  *ngIf="match.notes"
                  class="text-xs text-gray-500 italic">
                  ({{ match.notes }})
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- 公式戦セクション -->
      <div *ngIf="viewMode() === 'official'" class="fade-in-up is-visible">
        <!-- 統計情報 -->
        <div class="bg-gradient-to-r from-red-50 to-red-100 rounded-lg p-6 mb-8 shadow-md">
          <h3 class="text-xl font-bold font-serif-jp text-gray-800 mb-4">公式戦成績</h3>
          <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
            <div class="text-center">
              <p class="text-3xl font-bold text-[#002D62]">{{ officialStats.total }}</p>
              <p class="text-sm text-gray-600 mt-1">試合数</p>
            </div>
            <div class="text-center">
              <p class="text-3xl font-bold text-green-600">{{ officialStats.wins }}</p>
              <p class="text-sm text-gray-600 mt-1">勝利</p>
            </div>
            <div class="text-center">
              <p class="text-3xl font-bold text-red-600">{{ officialStats.losses }}</p>
              <p class="text-sm text-gray-600 mt-1">敗北</p>
            </div>
          </div>
        </div>

        <!-- 大会ごとの試合結果 -->
        <div class="space-y-8">
          <div
            *ngFor="let tournament of officialTournaments; let i = index"
            class="border-2 border-gray-200 rounded-lg overflow-hidden">
            <div class="bg-gradient-to-r from-[#002D62] to-[#0050B3] text-white px-6 py-4">
              <h3 class="text-xl font-bold font-serif-jp">《{{ tournament.name }}》</h3>
            </div>
            <div class="p-4 space-y-3">
              <div
                *ngFor="let match of tournament.matches"
                class="bg-white border-2 rounded-lg p-4 hover:shadow-lg transition-all duration-300"
                [ngClass]="getResultClass(match.result)">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2">
                  <div class="flex items-center gap-3">
                    <span class="text-sm text-gray-600 font-medium min-w-[80px]">
                      {{ match.date }}
                    </span>
                    <span class="font-bold text-lg">
                      {{ match.ourScore }} - {{ match.opponentScore }}
                    </span>
                    <span class="text-gray-700">vs {{ match.opponent }}</span>
                  </div>
                  <span
                    class="px-3 py-1 rounded-full text-sm font-bold"
                    [ngClass]="getResultClass(match.result)">
                    {{ getResultText(match.result) }}
                  </span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>
