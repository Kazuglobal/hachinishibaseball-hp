<section class="h-screen relative flex flex-col">
  <!-- Sub-header for HACHINISHI SPIRIT -->
  <div class="pt-20"> <!-- Spacer for fixed header -->
    <div class="w-full py-4 text-center text-white bg-gray-700">
      <h3 class="font-oswald text-4xl md:text-5xl font-bold tracking-widest">HACHINISHI SPIRIT</h3>
    </div>
  </div>

  <div class="relative flex-grow"> <!-- This container will hold the hero video and text -->
    <!-- Hero GIF/Image Background -->
    <div class="absolute inset-0 z-0">
      <!-- ベース画像（常に表示、GIFアニメーション終了後またはエラー時に前面に） -->
      <img 
        ngSrc="/assets/images/hero-first-view.jpg" 
        width="1920" 
        height="1080" 
        alt="野球場のホームプレート" 
        priority 
        [disableOptimizedSrcset]="true" 
        decoding="async"
        (load)="baseImageLoaded.set(true)"
        class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out z-10"
        [class.opacity-0]="showGif() && !gifError()"
        [class.opacity-100]="!showGif() || gifError()">
      <!-- GIFアニメーション（ロード時に表示、一定時間後に非表示） -->
      <img
        #heroGif
        [src]="gifSrc()"
        alt="ロードアニメーション"
        loading="eager"
        decoding="async"
        fetchpriority="high"
        class="absolute inset-0 w-full h-full object-cover transition-opacity duration-1000 ease-in-out z-20"
        [class.opacity-0]="!showGif() || gifError()"
        [class.opacity-100]="showGif() && !gifError() && gifLoaded()"
        (error)="onGifError($event)"
        (load)="onGifLoaded()">
      <div class="absolute inset-0 bg-black/50"></div>
    </div>

    <!-- Hero Text Content -->
    <div class="relative z-10 flex flex-col h-full items-center justify-end text-white text-center px-4 pb-4 md:pb-12">
        <div class="fade-in-up is-visible mb-4 md:mb-12">
            <h1 class="font-serif-jp text-3xl md:text-5xl leading-tight">
                八戸西高校野球部OB会
            </h1>
            <p class="font-sans text-lg md:text-xl mt-4 tracking-wider">
                白球に捧げた青春、その絆は永遠に。
            </p>
        </div>
    </div>
  </div>

  <!-- ご支援のお願いポップアップ -->
  @if (showSupportPopup()) {
    <div class="fixed inset-0 z-[9999] flex items-center justify-center p-3 sm:p-4 bg-black/60 backdrop-blur-sm animate-fade-in" 
         (click)="closeSupportPopup()"
         (touchstart)="closeSupportPopup()"
         (touchend)="$event.preventDefault()"
         style="position: fixed !important; top: 0 !important; left: 0 !important; right: 0 !important; bottom: 0 !important; width: 100vw !important; height: 100vh !important; overflow-y: auto; -webkit-overflow-scrolling: touch;">
      <div class="bg-white rounded-lg shadow-2xl max-w-md w-full p-4 sm:p-6 md:p-8 relative animate-slide-in-right my-auto" 
           (click)="$event.stopPropagation()"
           (touchstart)="$event.stopPropagation()"
           (touchend)="$event.stopPropagation()"
           style="max-height: 90vh; overflow-y: auto; -webkit-overflow-scrolling: touch; position: relative; z-index: 10000;">
        <!-- 閉じるボタン -->
        <button 
          (click)="closeSupportPopup()"
          (touchstart)="$event.stopPropagation()"
          class="absolute top-2 right-2 sm:top-4 sm:right-4 text-gray-400 hover:text-gray-600 active:text-gray-800 transition-colors duration-200 p-2 -m-2 touch-manipulation">
          <svg class="w-6 h-6 sm:w-7 sm:h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>

        <!-- コンテンツ -->
        <div class="text-center">
          <h2 class="text-2xl md:text-3xl font-bold text-[#002D62] mb-4 font-serif-jp">
            ご支援のお願い
          </h2>
          <p class="text-gray-700 mb-4 sm:mb-6 leading-relaxed text-xs sm:text-sm md:text-base">
            野球部の活動を支えてくださる皆様へ、心より感謝申し上げます。<br class="hidden sm:block">
            部員たちがより良い環境で練習に励み、甲子園出場を目指して全力で取り組めるよう、<br class="hidden sm:block">
            会費納入へのご協力をお願い申し上げます。
          </p>
          <div class="bg-blue-50 rounded-lg p-3 sm:p-4 mb-4 sm:mb-6">
            <p class="text-base sm:text-lg font-bold text-[#002D62] mb-1 sm:mb-2">納入金額</p>
            <p class="text-2xl sm:text-3xl font-bold text-gray-800">年間 5,000円</p>
          </div>
          <div class="flex flex-col sm:flex-row gap-2 sm:gap-3">
            <a 
              routerLink="/support" 
              [fragment]="'credit'"
              (click)="closeSupportPopup()"
              (touchstart)="$event.stopPropagation()"
              class="flex-1 bg-[#002D62] text-white py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:bg-blue-950 active:bg-blue-900 transition-colors duration-300 font-semibold text-center text-sm sm:text-base touch-manipulation">
              会費納入について
            </a>
            <button 
              (click)="closeSupportPopup()"
              (touchstart)="$event.stopPropagation()"
              class="flex-1 bg-gray-200 text-gray-700 py-2.5 sm:py-3 px-4 sm:px-6 rounded-lg hover:bg-gray-300 active:bg-gray-400 transition-colors duration-300 font-semibold text-sm sm:text-base touch-manipulation">
              後で見る
            </button>
          </div>
        </div>
      </div>
    </div>
  }
</section>
